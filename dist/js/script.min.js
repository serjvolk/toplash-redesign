$(document).ready((function(){var e=$(window).outerWidth(),s=$(window).outerHeight(),t="ontouchstart"in window;const i=$("body");$(window).resize((function(){e=$(window).outerWidth(),s=$(window).outerHeight(),f(),function(){let s=e<479.98;s!==N&&(N=s,!1===N?$(".js-dropdown-item.less-md4").each((function(){$(this).removeClass("active"),$(this).find(".js-dropdown-body").slideDown(0)})):$(".js-dropdown-item.less-md4").each((function(){$(this).find(".js-dropdown-body").slideUp(0)})))}(),M()})),$(window).scroll((function(){let t=$(window).scrollTop();!function(e){if(0===A.length)return!1;let t=A.offset().top-s;e>t+40&&null===P&&(P=!0,R())}(t),function(e){let t=$(document).height()-s-2*z.height();(e>s&&e<t&&!1===U||(e<s||e>t)&&!0===U)&&(U=!U,z.toggleClass("active",U))}(t),function(t){if(0===L.length||e>767.98)return!1;let i=$(document).height()-s-5*L.height(),o=I.offset().top-s;(t>o&&t<i&&!1===q||(t<o||t>i+W+32)&&!0===q)&&(q=!q,L.toggleClass("active",q))}(t)})),$(".js-select-once-1").select2({minimumResultsForSearch:-1,width:"auto",dropdownCssClass:"select-once-1-dropdown"}),$(".js-select-once-2").select2({minimumResultsForSearch:-1,width:"auto",dropdownCssClass:"select-once-2-dropdown"}),function(){if(0!==$(".wrapScroll").length){var e=$(".scroll").height();$(".wrapScroll").css("height",e+"px")}}();var o=function(s){let i=s.hasClass("responsive");var o=s.find(".scroll__body"),l=o.width();if(!0===i){let t;t=e>1343?(l-48)/4:e>871.98?(l-64)/3:e>551.98?(l-48)/2:(l-32)/1,e>767.98&&s.find(".cardReviews").css("width",t+"px")}var n=s.find(".scroll__scroll"),a=n.width(),r=s.data("scroll-id");if(null==r)var d=s.find(".scroll__button.btn-prev"),c=s.find(".scroll__button.btn-next");else d=$(".js-scroll-button.btn-prev[data-scroll-id="+r+"]"),c=$(".js-scroll-button.btn-next[data-scroll-id="+r+"]");var u=s.find(".overlayArea-prev"),p=s.find(".overlayArea-next"),f=parseFloat(n.css("padding-left")),m=parseFloat(n.css("padding-right")),v=function(t,l){var a=Math.round(n.width()+f+m-o.width()),r=Math.round(o.scrollLeft());if("buttonClick"===t){if(i)if(e>1343)var d=1*(s.width()+16);else if(e<767.98)d=.8*s.width();else d=1*(s.width()-16);else d=.8*s.width();"next"===l?(r+=d)>a&&(r=a):(r-=d)<0&&(r=0)}return g(0===r?"start":r===a?"finish":"center"),r},h=function(e){var s=v("buttonClick",e);o.stop().animate({scrollLeft:s},500,"swing")},g=function(e){"start"===e?(!1===t&&(d.removeClass("open"),c.addClass("open")),u.removeClass("open"),p.addClass("open")):"center"===e?(!1===t&&(d.addClass("open"),c.addClass("open")),u.addClass("open"),p.addClass("open")):"finish"===e?(!1===t&&(d.addClass("open"),c.removeClass("open")),u.addClass("open"),p.removeClass("open")):"not-scroll"===e&&(!1===t&&(d.removeClass("open"),c.removeClass("open")),u.removeClass("open"),p.removeClass("open"))};g(a>l?"start":"not-scroll"),t?(d.removeClass("open"),c.removeClass("open")):(c.click((function(){h("next")})),d.click((function(){h("prev")}))),o.scroll((function(){v()}))};$(".scroll").each((function(){e<479.98&&$(this).hasClass("js-not-md4")||new o($(this))}));var l=$(".popup"),n=!1;function a(){$(".popup").removeClass("open"),i.removeClass("lock"),n=!1}$(document).on("click",".js-popup-open",(function(e){if(e.preventDefault(),$(this).hasClass("disabled"))return!1;var s;s=$(this).data("popupid"),n!==s?(!1!==n&&a(),n=s,$("#"+s).addClass("open"),i.addClass("lock")):a()})),$(document).on(t?"touchend":"mousedown",(function(e){var s=$(".js-popup-open").has(e.target).length;0===l.has(e.target).length&&l.hasClass("open")&&0===s&&0===$(".js-micropopup-lottery").has(e.target).length&&a()})),$(document).on("keydown",(function(e){27===e.which&&(a(),null!==c&&u(),x())})),$(document).on("click",".js-popup-close",(function(e){e.preventDefault(),a()})),$(".js-validation-form").submit((function(e){if(!0===$(e.originalEvent.submitter).hasClass("js-submit-without-validate"))return!0;let s=!0;return $(this).find("._validate").each((function(){let e=$(this).data("validation-type"),t=$(this).val(),i=!1;for(var o=0;o<e.length;o++){let s=r[e[o]](t);if(!0!==s){i=s;break}}!1!==i&&(s=!1,$(this).addClass("_error"),$(this).closest(".js-validation-block").find(".js-validation-error").text(d[i]))})),!1===s&&$(this).find(".js-form-submit").addClass("disabled"),s})),$(".js-validation-form ._validate").on("focus change",(function(){$(this).hasClass("_error")&&($(this).removeClass("_error"),$(this).closest(".js-validation-block").find(".js-validation-error").text("")),0===$(this).closest(".js-validation-form").find("._error").length&&$(this).closest(".js-validation-form").find(".js-form-submit").removeClass("disabled")}));let r={req:function(e){return""!==e||"required"},tel:function(e){return""===e||(!1!==/^(\s*)?(\+)?([- _():=+]?\d[- _():=+]?){8,14}(\s*)?$/.test(e)||"wrongTelephone")},email:function(e){return""===e||(!1!==/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e)||"wrongEmail")},name:function(e){return""===e||(e.length<2?"wrongNameShort":!(e.length>100)||"wrongNameLong")},password:function(e){return""===e||(!1===/^[a-zA-Z0-9]+$/.test(e)?"passwordOnlyLatin":!1===/^[^-() /]*$/.test(e)?"passwordWithoutCharacters":e.length<8?"wrongPasswordShort":e.length>100?"wrongPasswordLong":!parseInt(e.substr(0,1))||"passwordFirstSymbolLeter")},passwordMatch:function(e){return $(".js-password-match").val()===e||"passwordNotMatch"},reqAddress:function(e){return""!==e||"requiredAddress"},bankCard:function(e){return""===e||(!1!==/[-0-9]{16}/.test(e)||"wrongWankCard")},reqImage:function(e){return""!==e||"requiredImage"}};$(".js-showHidePassword").click((function(){var e=$(this).closest(".js-showHidePasswordParent");"password"===e.find("input").attr("type")?(e.find("input").attr("type","text"),$(this).addClass("active")):(e.find("input").attr("type","password"),$(this).removeClass("active"))}));let d={required:"Поле обязательное для заполнения",wrongTelephone:"Неверный формат номера телефона",wrongEmail:"Неверный формат электронной почты",wrongNameShort:"Cлишком короткое значение (мин. 2 символа)",wrongNameLong:"Cлишком длинное значение (макс. 100 символов)",wrongPasswordShort:"Пароль должен содержать больше 8 символов",wrongPasswordLong:"Пароль должен содержать меньше 80 символов",passwordOnlyLatin:"Пароль должен содержать только латинские буквы и цифры",passwordWithoutCharacters:"Пароль не должен содержать спецсимволы (),/- []",passwordFirstSymbolLeter:"Пароль должен начинаться с буквы",passwordNotMatch:"Пароли не совпадают",requiredAddress:"Выберите адрес доставки",wrongWankCard:"Поле должно содержать 16 цифр",requiredImage:"Необходимо прикрепить скриншот"},c=null;function u(){c.slick("unslick"),c.removeClass("isSliderReviews").addClass("imageFeedback");let e=c.find("video");0!==e.length&&(e.prop("muted",!0).prop("controls",!1),e.get(0).pause()),$(".feedbackSliderControls").removeClass("active"),i.removeClass("lock"),c=null}$(".js-detect-grid .imageFeedback__item").click((function(){if(null===c){let e=$(this).closest(".js-detect-grid"),s=$(this).index();e.removeClass("imageFeedback").addClass("isSliderReviews"),e.find("video").prop("muted",!1).prop("controls",!0),i.addClass("lock"),$(".feedbackSliderControls").addClass("active"),c=e,e.slick({prevArrow:$(".feedbackSliderControls .sliderBtn.btn-prev"),nextArrow:$(".feedbackSliderControls .sliderBtn.btn-next"),initialSlide:s})}})),$(".js-close-SliderReviews").click((function(){u()})),$(document).on("click",(function(e){null!==c&&$(e.target).hasClass("imageFeedback__wrap")&&u()})),$(".js-cartSlider").on("init",(function(e,s){$(".js-cartSlider-slideCount").text(s.slideCount)})),$(".js-cartSlider").slick({prevArrow:$(".js-cartSlider-control.btn-prev"),nextArrow:$(".js-cartSlider-control.btn-next")}),$(".js-cartSlider-slideCount").text(),$(".js-cartSlider").on("afterChange",(function(e,s,t,i){let o=(t||0)+1;$(".js-cartSlider-currentSlide").text(o),$(".js-cartSlider-slideCount").text(s.slideCount)})),$(".js-slider-baner").slick({prevArrow:$(".js-slider-baner-parent .sliderBtn.btn-prev"),nextArrow:$(".js-slider-baner-parent .sliderBtn.btn-next"),dots:!0,autoplay:!0,autoplaySpeed:3500}),$(".js-sliderBig-reviews").slick({prevArrow:$(".js-sliderBig-reviews-parent .sliderBtn.btn-prev"),nextArrow:$(".js-sliderBig-reviews-parent .sliderBtn.btn-next"),dots:!0});let p=!1;function f(){e<992.98?!1===p&&(p=!0,$(".js-slider-useful").slick({slidesToShow:2,prevArrow:$(".useful .sliderBtn.btn-prev"),nextArrow:$(".useful .sliderBtn.btn-next"),responsive:[{breakpoint:551.98,settings:{slidesToShow:1}}]})):!0===p&&(p=!1,$(".js-slider-useful").slick("unslick"))}f(),$(".js-slider-popular").slick({slidesToShow:3,prevArrow:$(".popular .sliderBtn.btn-prev"),nextArrow:$(".popular .sliderBtn.btn-next"),responsive:[{breakpoint:1044.98,settings:{slidesToShow:2}},{breakpoint:551.98,settings:{slidesToShow:1}}]}),!1===t&&($(".js-hover-image-slider .useful__imageWrap").each((function(){let e=$(this).find("img").length;if(e>1){$(this).addClass("initImage"),$(this).find("img:first-child").addClass("active");let s='<div class="useful__hoverArea">',t='<div class="useful__dots">';for(let i=0;i<e;i++)s+="<span></span>",t+=0===i?"<span class='active'></span>":"<span></span>";s+="</div>",t+="</div>",$(this).closest(".useful__image").append(s+t)}})),$(document).on("mouseenter",".js-hover-image-slider .useful__hoverArea > span",(function(){let e=$(this).index(),s=$(this).closest(".useful__image");s.find("img").removeClass("active"),s.find(".useful__imageWrap img:eq("+e+")").addClass("active"),s.find(".useful__dots span").removeClass("active"),s.find(".useful__dots span:eq("+e+")").addClass("active")})),$(document).on("mouseleave",".useful__card",(function(){let e=$(this).find(".useful__imageWrap.initImage");0!==e.length&&(e.find("img").removeClass("active"),e.find("img:first-child").addClass("active"),e.closest(".useful__image").find(".useful__dots span").removeClass("active"),e.closest(".useful__image").find(".useful__dots span:first-child").addClass("active"))}))),$(".js-filter-slider .scroll__item a").click((function(e){e.preventDefault();let s=$(this).data("filter");$(".js-filter-slider .scroll__item a").removeClass("btn-2_active"),$(this).addClass("btn-2_active"),"all"===s?$(".js-slider-popular").slick("slickUnfilter").slick("slickFilter",".useful__col"):$(".js-slider-popular").slick("slickUnfilter").slick("slickFilter","."+s);let t=$(".js-slider-popular .slick-list").width();$(".js-slider-popular .slick-track").width()<t?$(".popular .sliderBtn").hide():$(".popular .sliderBtn").show()}));let m=$(".sliderBig__item .js-presentation-video").parent().index();$(".js-sliderBig").on("init",(function(e,s){$(".js-sliderBig").removeClass("preInit")})),$(".js-sliderBig").slick({prevArrow:$(".product .sliderBtn.btn-prev"),nextArrow:$(".product .sliderBtn.btn-next"),dots:!0}),$(".js-sliderBig").on("beforeChange",(function(e,s,t,i){$(".js-scrollPreview .scrollPreview__item").removeClass("active"),$(".js-scrollPreview .scrollPreview__item:eq("+i+")").addClass("active");let o=$(".js-scrollPreview").scrollLeft(),l=o+parseInt($(".js-scrollPreview").width()),n=96*(i=parseFloat(i)),a=96*i+80,r=!1;a>l&&(r=a-l+o),n<o&&(r=n),!1!==r&&$(".js-scrollPreview").animate({scrollLeft:r},300);let d=$(s.$slides.get(i)).find("video");1===d.length?d.trigger("play"):$(".sliderBig__item video").trigger("pause")})),$(".js-scrollPreview .scrollPreview__item").click((function(){var e=$(this).index();$(".js-sliderBig").slick("goTo",e)})),$(".js-view-presentation-video").click((function(){$(".js-sliderBig").slick("goTo",m)})),$(".cardReviews__text .textLay").each((function(){var e=parseFloat($(this).css("line-height"));$(this).height()>4*e&&($(this).closest(".cardReviews__text").addClass("hidden"),$(this).closest(".cardReviews").find(".cardReviews__button").addClass("js-hide-text"))})),$(document).on("click",".cardReviews .js-hide-text",(function(){$(this).toggleClass("active"),$(this).closest(".cardReviews__content").find(".cardReviews__text").toggleClass("hidden")}));const v=$(".js-burger"),h=$(".js-menu"),g=$(".js-overlayMenu");let w=!1;$(document).on(t?"touchend":"mousedown",(function(s){let t=1===v.has(s.target).length,o=1===h.has(s.target).length,l=$(s.target).hasClass("js-menu"),n=w;t?n=!n:!1===t&&!1===l&&!1===o&&(n=!1),n!==w&&(w=n,v.toggleClass("active",w),h.toggleClass("active",w),g.toggleClass("active",w),e<479.98&&i.toggleClass("lock",w))}));let j=!1;$(".js-stories").click((function(e){if(1===$(e.target).closest(".about__item").length){let s=$(e.target).closest(".about__item").data("id"),t=($('.stories__item[data-id="'+s+'"]').not(".slick-cloned").length,$('.stories__item[data-id="'+s+'"]').not(".slick-cloned").index());$(".js-stories").addClass("active"),i.addClass("lock"),!1===j?($(".js-sliderStories").slick({prevArrow:$(".stories__body .sliderBtn.btn-prev"),nextArrow:$(".stories__body .sliderBtn.btn-next"),initialSlide:t}),$(".js-sliderStories").slick("goTo",t)):$(".js-sliderStories").slick("goTo",t-1),j=!0}else $(e.target).hasClass("stories__body")&&x()}));let _=null;$(".js-stories").on("beforeChange",(function(e,s,t,i){let o=$(s.$slides.get(i)).data("id"),l=$('.stories__item[data-id="'+o+'"]').not(".slick-cloned").length,n=0;1!==l&&(n=$(s.$slides.get(i)).data("sub-id"));let a=$(s.$slides.get(i)).find("video"),r=a.length,d=null;null!==_&&(_.get(0).pause(),_=null),1===r&&(d=1e3*a[0].duration,a[0].currentTime=0,a.get(0).play(),_=a);let c=d>0?d:5e3;S=!1,$(".js-timescale").remove(),$(".js-sliderStories").append(function(e,s,t=5e3){let i=!1===B?"":"active",o='<div class="timescale js-timescale" style="--stories-duration: '+t+'ms;">';o+='<div class="timescale__lines">';for(var l=0;l<e;l++){o=o+'<div class="timescale__item"><div class="timescale__left '+(l===s?"active":l<s?"complete":"")+'"></div></div>'}return o+="</div>",o+='<div class="f-jcsb-aic mt-16">',o+='<div class="d-flex">',o+='<svg class="timescale__control svgWithState w24 js-stories-pause">',o+='<use class="st-1" xlink:href="'+pathSprite+'#pause"/>',o+='<use class="st-2" xlink:href="'+pathSprite+'#play_w16in24"/>',o+="</svg>",o+='<svg class="timescale__control svgWithState volumn w24 js-stories-volumn '+i+'">',o+='<use class="st-1" xlink:href="'+pathSprite+'#volumn-on"/>',o+='<use class="st-2" xlink:href="'+pathSprite+'#volumn-off"/>',o+="</svg>",o+="</div>",o+='<svg class="timescale__control close w24 js-close-stories">',o+='<use xlink:href="'+pathSprite+'#close"/>',o+="</svg>",o+="</div>",o+="</div>",o}(l,n,c)),function(e){let s=$(window).height(),t=$('.about__item[data-id="'+e+'"]').outerHeight(),i=t*e-(s/2-t/2-8);$(".js-stories .scroll__body").animate({scrollTop:i},300)}(o),b(c)}));let C,k=null;function b(e=5e3){C=(new Date).getTime(),clearTimeout(k),k=setTimeout((function(){$(".js-sliderStories").slick("slickNext")}),e)}function x(){clearTimeout(k),null!==_&&(_.get(0).pause(),_=null),$(".js-stories").removeClass("active"),i.removeClass("lock")}$(document).on("click",".js-close-stories",(function(){x()}));let y,S=!1;$(document).on("mousedown",".js-stories-pause",(function(e){if(!1===S){S=!0,$(this).addClass("active"),$(".timescale__left").addClass("pause");let e=(new Date).getTime();y=e-C,clearTimeout(k),null!==_&&_.get(0).pause()}else{S=!1,$(this).removeClass("active"),$(".timescale__left").removeClass("pause"),null!==_&&_.get(0).play(),b((null!==_?1e3*_.get(0).duration:5e3)-y)}}));let B=!1;$(document).on("click",".js-stories-volumn",(function(e){B=!B,$(".stories__item video").prop("muted",B),$(this).toggleClass("active")}));let A=$(".js-animate-item"),T=$(".js-video-serum"),F=$(".js-toggle-video-serum"),P=null;function R(){let e=!0===P?"Пауза":"Воспроизвести";!0===P?T.get(0).play():T.get(0).pause(),F.find("span").text(e),F.find("svg").toggleClass("active",P)}F.click((function(){P=!0!==P,R()})),$(".js-mask-tel").mask("+7(999)999-99-99"),$(".js-mask-card").mask("9999-9999-9999-9999");let q=!1,L=$(".js-totalityFixed"),I=$(".js-totalityFixed-anchor"),W=L.outerHeight();var D=!0;function M(){e<767.98&&!0===D?$(".js-movement-block").each((function(){var e=$(this).closest(".js-movement-block-to-desc").data("id");$(this).appendTo(".js-movement-block-to-mob[data-id="+e+"]"),D=!1})):e>767.98&&!1===D&&$(".js-movement-block").each((function(){var e=$(this).closest(".js-movement-block-to-mob").data("id");$(this).appendTo(".js-movement-block-to-desc[data-id="+e+"]"),D=!0}))}let N;M(),$("#i-user-image").change((function(){if($("#image-file-error").text(""),void 0!==$(this)[0].files[0]){!0===function(e){if(!["image/jpeg","image/png","image/gif"].includes(e.type))return $("#image-file-error").text("Разрешены только изображения."),$("#i-user-image").val(""),!1;if(e.size>2097152)return $("#image-file-error").text("Файл должен быть менее 2 МБ."),!1;var s=new FileReader;return s.onload=function(e){$("#formPreview").removeClass("dn").html(`<img loading="lazy" src="${e.target.result}" alt="Фото">`)},s.onerror=function(e){alert("Ошибка")},s.readAsDataURL(e),!0}($(this)[0].files[0])&&($(".js-image-downloader").text($(".js-image-downloader").data("text-change")),$("#user-image-name").removeClass("dn").text($(this)[0].files[0].name))}})),N=e<479.98,$(document).on("click",".js-dropdown-head",(function(){if($(this).closest(".js-dropdown-item").hasClass("less-md4")&&e>479.98)return!1;$(this).closest(".js-dropdown-item").toggleClass("active");let s=$(this).closest(".js-dropdown-item").hasClass("active"),t=$(this).closest(".js-dropdown-item").find(".js-dropdown-body");s?t.slideDown(300):t.slideUp(300)})),function(s){let t=void 0===s?300:s;$(".js-dropdown-item").each((function(){if($(this).hasClass("less-md4")&&e>479.98)return!1;let s=$(this).hasClass("active"),i=$(this).find(".js-dropdown-body");s?i.slideDown(t):i.slideUp(t)}))}(0),$(".js-goto-top").click((function(){$("html, body").animate({scrollTop:0},500)})),$(".js-rating").each((function(){let e=$(this).data("rating");for(let s=1;s<6;s++){let t=s<=e?"star-fill":"star";$(this).append('<svg><use xlink:href="'+pathSprite+"#"+t+'"/></svg>')}})),$(".js-detect-grid").each((function(){let e=$(this).children().length;$(this).addClass("child-"+e)}));let H={count:0,max:25};setTimeout((function(){!function e(){if(H.count>H.max)return!1;H.count++,$(".js-detect-grid .imageFeedback__item video").each((function(){let s=$(this)[0].duration.toFixed(0);if("NaN"===s)return setTimeout((function(){e()}),1e3),!1;let t=s%60,i=Math.floor(s/60),o='<span class="imageFeedback__duration">'+((i<10?"0":"")+i+":"+(t<10?"0":"")+t)+"</span>";o+='<span class="btnRound btnPlayVideo">',o+='<svg class="w16"><use xlink:href="img/sprite/icons-sprite.svg#play"/></svg>',o+="</span>",$(this).closest(".imageFeedback__wrap").append(o)}))}()}),10),$(".js-goto-set").click((function(e){e.preventDefault(),$(".js-goto-set").removeClass("btn-2_active"),$(this).addClass("btn-2_active");let s=$(this).data("set-id");$(".set").removeClass("active"),$('.set[data-id="'+s+'"]').addClass("active")})),$(".js-copy-text").click((function(){let e=$(this).data("copy-text"),s=$(this).data("copy-message");var t;!function(e){var s=$("<textarea>");$("body").append(s),s.val(e).select(),document.execCommand("copy"),s.remove()}(e),t=s,$(".simpleMessage").remove(),i.append('<div class="simpleMessage">'+t+"</div>")})),$(".js-personal-edit").click((function(){$(this).addClass("dn"),$(this).closest(".js-validation-form").find("input").removeAttr("disabled"),$(this).closest(".js-validation-form").find(".js-form-submit").removeClass("dn")}));let U=!1,z=$(".js-fixed-card");!function(){let e=document.querySelectorAll(".ibg");for(var s=0;s<e.length;s++)e[s].querySelector("img")&&(e[s].style.backgroundImage="url("+e[s].querySelector("img").getAttribute("src")+")")}(),$(".js-inputTextBtn-change input").on("input",(function(){""===$(this).val()?$(this).closest(".js-inputTextBtn-change").find(".inputBtn").addClass("inputBtn_gray"):$(this).closest(".js-inputTextBtn-change").find(".inputBtn").removeClass("inputBtn_gray")}));let E=$(".js-rest-time-resend-code"),O=59;if(0!==E.length){let e=setInterval((function(){E.text(O),O--,0===O&&(clearInterval(e),$(".js-rest-time-exist").remove(),$(".js-rest-time-missing").removeClass("dn"))}),1e3)}$(document).on("click",(function(e){e.ctrlKey&&show_hide_micropopupLottery()}))}));